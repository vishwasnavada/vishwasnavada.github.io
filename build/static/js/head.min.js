!function(t,e){"object"==typeof exports?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t)}(this,function(t){function e(t){void 0!==t.length?this._targetElement=t:this._targetElement=[t],void 0===window._progressjsId&&(window._progressjsId=1),void 0===window._progressjsIntervals&&(window._progressjsIntervals={}),this._options={theme:"blue",overlayMode:!1,considerTransition:!0}}function r(){void 0!==this._onBeforeStartCallback&&this._onBeforeStartCallback.call(this),d.call(this);for(var t=0,e=this._targetElement.length;t<e;t++)n.call(this,this._targetElement[t])}function n(t){if(!t.hasAttribute("data-progressjs")){var e=f.call(this,t);t.setAttribute("data-progressjs",window._progressjsId);var r=document.createElement("div");r.className="progressjs-progress progressjs-theme-"+this._options.theme,"body"===t.tagName.toLowerCase()?r.style.position="fixed":r.style.position="absolute",r.setAttribute("data-progressjs",window._progressjsId);var n=document.createElement("div");n.className="progressjs-inner";var s=document.createElement("div");s.className="progressjs-percent",s.innerHTML="1%",n.appendChild(s),this._options.overlayMode&&"body"===t.tagName.toLowerCase()?(r.style.left=0,r.style.right=0,r.style.top=0,r.style.bottom=0):(r.style.left=e.left+"px",r.style.top=e.top+"px",r.style.width=e.width+"px",this._options.overlayMode&&(r.style.height=e.height+"px")),r.appendChild(n);document.querySelector(".progressjs-container").appendChild(r),o(t,1),++window._progressjsId}}function s(t){for(var e=0,r=this._targetElement.length;e<r;e++)o.call(this,this._targetElement[e],t)}function o(t,e){var r=this;e>=100&&(e=100),t.hasAttribute("data-progressjs")&&setTimeout(function(){void 0!==r._onProgressCallback&&r._onProgressCallback.call(r,t,e);var n=i(t);n.style.width=parseInt(e)+"%";var n=n.querySelector(".progressjs-percent"),s=parseInt(n.innerHTML.replace("%",""));!function(t,e,r){function n(t,e,r){var i=Math.abs(e-r);i<3?o=30:i<20?o=20:intervanIn=1,e-r!=0&&(t.innerHTML=(s?++e:--e)+"%",setTimeout(function(){n(t,e,r)},o))}var s=!0;e>r&&(s=!1);var o=10;n(t,e,r)}(n,s,parseInt(e))},50)}function i(t){var e=parseInt(t.getAttribute("data-progressjs"));return document.querySelector('.progressjs-container > .progressjs-progress[data-progressjs="'+e+'"] > .progressjs-inner')}function a(t,e){var r=this,n=parseInt(this._targetElement[0].getAttribute("data-progressjs"));void 0!==window._progressjsIntervals[n]&&clearInterval(window._progressjsIntervals[n]),window._progressjsIntervals[n]=setInterval(function(){l.call(r,t)},e)}function l(t){for(var e=0,r=this._targetElement.length;e<r;e++){var n=this._targetElement[e];if(n.hasAttribute("data-progressjs")){var s=i(n),a=parseInt(s.style.width.replace("%",""));a&&o.call(this,n,a+(t||1))}}}function c(){void 0!==this._onBeforeEndCallback&&(!0===this._options.considerTransition?i(this._targetElement[0]).addEventListener(p(),this._onBeforeEndCallback,!1):this._onBeforeEndCallback.call(this));for(var t=parseInt(this._targetElement[0].getAttribute("data-progressjs")),e=0,r=this._targetElement.length;e<r;e++){var n=this._targetElement[e],s=i(n);if(!s)return;var a=parseInt(s.style.width.replace("%","")),l=1;a<100&&(o.call(this,n,100),l=500),function(t,e){setTimeout(function(){t.parentNode.className+=" progressjs-end",setTimeout(function(){t.parentNode.parentNode.removeChild(t.parentNode),e.removeAttribute("data-progressjs")},1e3)},l)}(s,n)}if(window._progressjsIntervals[t])try{clearInterval(window._progressjsIntervals[t]),window._progressjsIntervals[t]=null,delete window._progressjsIntervals[t]}catch(t){}}function d(){if(!document.querySelector(".progressjs-container")){var t=document.createElement("div");t.className="progressjs-container",document.body.appendChild(t)}}function f(t){var e={};"body"===t.tagName.toLowerCase()?(e.width=t.clientWidth,e.height=t.clientHeight):(e.width=t.offsetWidth,e.height=t.offsetHeight);for(var r=0,n=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)r+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;return e.top=n,e.left=r,e}function h(t,e){var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r}function p(){var t,e=document.createElement("fakeelement"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in r)if(void 0!==e.style[t])return r[t]}var u=function(t){if("object"==typeof t)return new e(t);if("string"==typeof t){var r=document.querySelectorAll(t);if(r)return new e(r);throw new Error("There is no element with given selector.")}return new e(document.body)};return u.version="0.1.0",u.fn=e.prototype={clone:function(){return new e(this)},setOption:function(t,e){return this._options[t]=e,this},setOptions:function(t){return this._options=h(this._options,t),this},start:function(){return r.call(this),this},set:function(t){return s.call(this,t),this},increase:function(t){return l.call(this,t),this},autoIncrease:function(t,e){return a.call(this,t,e),this},end:function(){return c.call(this),this},onbeforeend:function(t){if("function"!=typeof t)throw new Error("Provided callback for onbeforeend was not a function");return this._onBeforeEndCallback=t,this},onbeforestart:function(t){if("function"!=typeof t)throw new Error("Provided callback for onbeforestart was not a function");return this._onBeforeStartCallback=t,this},onprogress:function(t){if("function"!=typeof t)throw new Error("Provided callback for onprogress was not a function");return this._onProgressCallback=t,this}},t.progressJs=u,u});